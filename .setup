#!/usr/bin/env bash

###############################################################################
# TODO: things to add
###############################################################################

# - BetterTouchTool on startup
# - Ensure only four-finger vertical and horizontal swipe do OS X stuff
# - Automatically create Fluid apps + cookie storage

###############################################################################
# Configure OS X
###############################################################################

. .osx

###############################################################################
# Optional scripts
###############################################################################

# Set up development environment
# ..dev

###############################################################################
# Configure Startup
###############################################################################
chmod +x ~/dotfiles/.startup
sudo defaults write com.apple.loginwindow LoginHook ~/dotfiles/.startup

###############################################################################
# Get Brew formulae
###############################################################################
brew install bash-completion
brew install wget
brew install node
brew install imagemagick

###############################################################################
# Install and configure python
###############################################################################
sudo easy_install pip

# AWS CLI
sudo pip install awscli

###############################################################################
# Get Homebrew casks
###############################################################################

brew tap caskroom/cask
brew install brew-cask

###############################################################################
# Install and configure applications
###############################################################################

# Google Chrome
brew cask install google-chrome

# Sublime Text
brew cask install sublime-text
sudo ln ~/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/bin/subl
cp -R ~/dotfiles/apps/Sublime\ Text\ 2/ ~/Library/Application\ Support/Sublime\ Text\ 2
export EDITOR='subl -w'

# 1Password
brew cask install onepassword

# Bettertouchtool
brew cask install bettertouchtool
mkdir ~/Library/Application\ Support/BetterTouchTool/
ln -s ~/dotfiles/apps/bettertouchtool/bttdata2 ~/Library/Application\ Support/BetterTouchTool/bttdata2

# Transmission
brew cask install transmission

# VLC
brew cask install vlc

# Spotify
brew cask install spotify

# Fluid
brew cask install fluid

# Evernote
brew cask install evernote

# Calibre
brew cask install calibre

# Unarchiver
brew cask install the-unarchiver

# Install keyboard remappers
brew cask install keyremap4macbook
brew cask install seil
sh ~/dotfiles/apps/seil/seil-import.sh
ln -s ~/dotfiles/apps/keyremap4macbook/private.xml ~/Library/Application\ Support/KeyRemap4MacBook/private.xml

# Silverlight
brew cask install silverlight

# Skype
brew cask install skype

# Unity Web Player
brew cask install unity-web-player

# Hexels
brew cask install hexels

# Adobe Creative Cloud Installer
brew cask install adobe-creative-cloud

# Install kindle
brew cask install kindle

# Dropbox
brew cask install dropbox

# Latex
brew cask install mactex

###############################################################################
# Install and configure git
###############################################################################

echo "Installing git..."
brew install git
git config --global credential.helper osxkeychain

echo "Configuring git..."
git config --global color.ui true
git config --global user.name danielsuo
git config --global user.name danielsuo@gmail.com
git config --global push.default simple

ssh-keygen -t rsa -C danielsuo@gmail.com -P G1thubP@ss -f ~/.ssh/github_rsa

echo "TODO: Paste your public key to https://github.com/settings/ssh"
pbcopy < ~/.ssh/github_rsa.pub
ssh-add ~/.ssh/github_rsa

brew install hub

###############################################################################
# Symlink dotfiles
###############################################################################
ln -s ~/dotfiles/.bash_profile ~/.bash_profile
ln -s ~/dotfiles/.bash_login ~/.bash_login
ln -s ~/dotfiles/.gitconfig ~/.gitconfig
ln -s ~/dotfiles/.octaverc ~/.octaverc

###############################################################################
# Symlink other applications
###############################################################################
sudo ln -s ~/dotfiles/utils/dockutil/scripts/dockutil /usr/bin/dockutil
dockutil --remove all

###############################################################################
# Install fonts
###############################################################################
cp ~/dotfiles/fonts/* ~/Library/Fonts

###############################################################################
# Set up depot
###############################################################################

# git clone git@github.com:floored/depot.git
# git clone git://github.com/creationix/nvm.git ~/.nvm

# echo '. "$HOME/.nvm/nvm.sh" # Load NVM' > ~/.bash_login
# . ~/.bash_login

# nvm install v0.8.19

## HEROKU CONFIG STUFF

# brew install couchdb
# brew install redis
# npm rebuild

###############################################################################
# Set up blog
###############################################################################

# git clone git@github.com:floored/floored.github.com.git
# cd floored.github.com
# bundle install

###############################################################################
# Set up software applications
###############################################################################

# sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/bin/subl
